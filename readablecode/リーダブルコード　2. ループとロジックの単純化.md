# リーダブルコード　2. ループとロジックの単純化


## 制御フロー 
### 条件やループなどの制御フローはできるだけ自然にする　コードの読み手が立ち止まったり読み返したりしないように書く

- 比較演算子を使う時
	- 左側　調査対象　変化する
	- 右側　比較対象　あまり変化しない、安定したもの
- 条件は否定形よりも肯定系
- 単純な条件を先に書く
- 三項演算子は短い時のみ
	- 行数を短くするよりも、他人が理解するのにかかる時間を短くする
- 関数から早く返す
	- returnは複数使っていい

- ネストは浅くする
	- 失敗ケースをできるだけ早く返す
	- ループ内部の場合　continueを使う


## 巨大な式の分割

- 説明変数
- 要約変数

```
# before
request.user.id == document.owener_id
request.user.id != document.owener_id

# after
user_owns_document = (request.user.id == document.owener_id)
```

- ドモルガンの法則

```
# before
!(file_exists && !is_protected)

# after
!file_exists || is_protected

```

- 条件が複雑になったときは逆から考えてみる

##  変数と読みやすさ
- 変数が多いと追跡が困難
- スコープが大きいと把握する時間が長くなる
- 変数が頻繁に変更されると現在の値を把握するのが難しくなる

## 変数を削除する
- 役に立たない一時変数
	- 複雑な式を分割していない
	- より明確になっていない
	- 重複コードの削除になっていない１度しか使っていない
- ループ内の中間結果
	- 関数から早く返すことで中間結果の保持がいらなくなる